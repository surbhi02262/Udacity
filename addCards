/*
  Write JavaScript/React code here and press Ctrl+Enter to execute.

  Try: mountNode.innerHTML = 'Hello World!';
   Or: ReactDOM.render(<h2>Hello React!</h2>, mountNode);
   Learning 
*/

const Card = (props) => {
	return(
  
  <div style={{margin:'1em'}}>
    	<img src={props.avatar_url} />
      <div className="info" style={{display: 'inline-block',marginLeft:15}}>
      	<div>{props.name}</div>
        <div>{props.company}</div>
      </div>
  </div>
  )
}



class Form extends React.Component {
  state={
    username:""
  }
  handleSubmit = (event) => {
event.preventDefault();
console.log('under handle submit')
axios.get(`https://api.github.com/users/${this.state.username}`).then(resp => this.props.onSubmit(resp.data))
this.setState({username:""})
}

  render(){
  	return (
    	<form onSubmit={this.handleSubmit}>
    	<input type="text" name="username" value={this.state.username} placeholder="enter username" onChange={(event) => this.setState({username:event.target.value})}/>
      <button type="submit">Add card</button>
      </form>
    )
  }
}

const CardList = (props) => {
	return(
  		<div> 
       {props.cards.map((cardItem,key) => <Card {...cardItem} key={cardItem.id}/>)}
    	</div>
  )
}
class App extends React.Component{
state={
  cards: []
}
addNewCard = (cardInfo) =>{
this.setState(prevState => ({cards: prevState.cards.concat(cardInfo)}))
}
  render(){
    return(
    <div>
     <Form onSubmit={this.addNewCard}/>
     <CardList cards={this.state.cards}/>
    </div>
    )
  }
}
ReactDOM.render(<App />,mountNode);

